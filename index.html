<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rat Games</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#000000" />
  <style>
    body, html {
      margin: 0; padding: 0; height: 100vh; width: 100vw; overflow: hidden;
    }
    iframe {
      border: none;
      width: 100%;
      height: 100vh;
      display: block;
    }
  </style>
</head>
<body>

<iframe src="https://cty3ctyc42yjmxt3499ctn924u9xaje5y.vercel.app"
        scrolling="yes" allowfullscreen frameborder="0"></iframe>

<script>
  let deferredPrompt;
  let promptInterval;

  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    showInstallPrompt();
  });

  function showInstallPrompt() {
    if (!deferredPrompt) return;

    deferredPrompt.prompt();

    deferredPrompt.userChoice.then((choiceResult) => {
      if (choiceResult.outcome === 'accepted') {
        clearInterval(promptInterval);
        deferredPrompt = null;
        console.log('User accepted the install prompt');
      } else {
        console.log('User dismissed the install prompt, retrying in 5 seconds');
        // Retry prompt every 5 seconds to force install
        promptInterval = setTimeout(showInstallPrompt, 5000);
      }
    });
  }

  // Register service worker
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/service-worker.js')
      .catch(console.error);
  }
</script>

</body>
</html>
